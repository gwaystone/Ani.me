(()=>{const e=document.querySelector('[data-menu="menu"]'),n=document.querySelector(".menu-links");e.addEventListener("click",(function(e){n.classList.toggle("ativo")})),document.addEventListener("click",(function(t){n.contains(t.target)||t.target===e||n.classList.remove("ativo")}));const t=document.querySelector(".search-icon"),o=document.querySelector("#search-mobile"),s=document.querySelector(".font-1-logo");t.addEventListener("click",(e=>{t.classList.add("active"),o.classList.add("active"),o.focus(),window.innerWidth<=767&&(s.style.display="none")})),o.addEventListener("focusout",(()=>{t.classList.remove("active"),o.classList.remove("active"),s.style.display="block"})),function(){const e=document.querySelector("#search"),n=document.querySelector("#search-mobile"),t=document.querySelector("#search-btn");function o(n){console.log(n),"keyup"===n.type&&(0!==e.value.length?t.classList.add("ativo"):t.classList.remove("ativo")),("Enter"===n.code||"click"===n.type&&0!==e.value.length)&&(window.location.href=window.location.origin+"/search.html?q="+e.value),"Enter"===n.code||"click"===n.type&&0===e.value.length?(e.classList.add("invalido"),console.log(e.classList)):e.classList.remove("invalido")}e.addEventListener("keyup",o),n.addEventListener("keyup",(function(e){"Enter"===e.code&&0!==n.value.length&&(window.location.href=window.location.origin+"/search.html?q="+n.value),"Enter"===e.code&&0===n.value.length&&n.classList.add("invalido")})),t.addEventListener("click",o)}(),"/"===window.location.pathname&&async function(){const e=document.querySelector("div.grid-latest"),n=document.querySelector("div.grid-recent"),t=await fetch("https://gogoanime.consumet.org/recent-release?page=1"),o=await t.json(),s=await fetch("https://gogoanime.consumet.org/popular"),i=await s.json();o.map(((n,t)=>{if(t<10){const t=document.createElement("a");t.setAttribute("href","./anime.html?anime="+n.animeTitle),t.classList.add("anime-item"),t.innerHTML=`\n      <div class="cover">\n      <span class="episode font-2-mr">Episódio ${n.episodeNum}</span>\n      <img src="${n.animeImg}" alt="${n.animeTitle}" />\n      </div>\n      <span class="anime-title font-1-m">${n.animeTitle}</span>\n      `,e.append(t),document.querySelector(".lds-ellipsis")&&document.querySelector(".lds-ellipsis").remove()}})),i.map(((e,t)=>{if(t<6){const t=document.createElement("a");t.setAttribute("href","./anime.html?anime="+e.animeTitle),t.classList.add("anime-item"),t.innerHTML=`\n      <div class="cover">\n      \n      <img src="${e.animeImg}" alt="${e.animeTitle}" />\n      </div>\n      <span class="anime-title font-1-m">${e.animeTitle}</span>\n      `,n.append(t),document.querySelector(".lds-ellipsis")&&document.querySelector(".lds-ellipsis").remove()}})),n.style.cssText="display:grid",e.style.cssText="display:grid"}(),window.location.pathname.includes("anime.html")&&async function(){const e=await async function(){const e=window.location.search,n=new URLSearchParams(e).get("anime");try{const e=`https://gogoanime.consumet.org/search?keyw=${n}`,t=await fetch(e),o=`https://gogoanime.consumet.org/anime-details/${(await t.json())[0].animeId}`,s=await fetch(o);return await s.json()}catch(e){window.location.href=window.location.origin+"/404.html"}}(),n=await async function(){const e=window.location.search,n=`https://kitsu.io/api/edge/anime?filter[text]=${new URLSearchParams(e).get("anime")}`,t=await fetch(n);return await t.json()}(),t=document.querySelector("#anime-single .video h1"),o=document.querySelector(".sinopse-content li.episodes"),s=document.querySelector(".sinopse-content li.status"),i=document.querySelector(".sinopse-content li.genero"),a=document.querySelector(".sinopse-img"),c=document.querySelector(".sinopse-paragraph-content"),r=document.querySelector(".video-embed"),l="Completed"===e.status?"Completo":"Lançando";t.classList.remove("skeleton"),t.innerText=`${e.animeTitle} (${e.releasedDate})`,o.innerHTML=`<span class="info">Duração: </span><span class="info-content">${e.episodesList.length} Episódios.</span>`,s.innerHTML=`<span class="info">Status: </span><span class="info-content">${l}.</span>`,i.innerHTML=`<span class="info">Gêneros: </span><span class="info-content">${e.genres.slice(0,3).join(", ")}.</span>`,c.classList.remove("skeleton"),c.innerText=`${e.synopsis}`;const d=document.createElement("img");d.src=e.animeImg,d.alt=e.animeTitle,a.classList.remove("skeleton"),a.append(d);const m=`<iframe src="https://www.youtube.com/embed/${n.data[0].attributes.youtubeVideoId}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;r.outerHTML=m}(),window.location.pathname.includes("search.html")&&async function(){const e=new URLSearchParams(window.location.search),n="https://gogoanime.consumet.org/search?keyw="+e.get("q");document.querySelector(".font-1-xl.search-query").innerText=e.get("q");const t=await fetch(n),o=await t.json();if(document.querySelector(".search-results").replaceChildren(),console.log(o),0!==o.length)for(result of o){const e=document.createElement("li");e.setAttribute("class","result-item"),e.innerHTML=`\n      <a href="${window.location.origin}/anime.html?anime=${result.animeId}">\n      <div class="sinopse-img skeleton"></div>\n      <div class="result-container">\n      <h3 class="skeleton font-1-m">${result.animeTitle}</h3>\n    <p class="skeleton font-1-m">${result.status}</p>\n    </div>\n    </a>\n    `;const n=document.createElement("img");n.src=result.animeImg,n.alt=result.animeTitle,e.querySelector(".sinopse-img").classList.remove("skeleton"),e.querySelector(".sinopse-img").append(n),document.querySelector(".search-results").append(e)}else{const e=document.createElement("div");e.setAttribute("class","error-not-found"),e.innerHTML="\n    <div class='container'>\n    <h3>Anime não encontrado, tente buscar por outro termo.</h3>\n    </div>",e.style.cssText='\n      height: calc(100vh - 454px);\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      background: no-repeat url(../img/killua.jpg) rgba(6, 9, 15, .9);\n      background-position: center center;\n      background-blend-mode: overlay;\n      background-size: cover;\n      position: relative;\n      box-shadow: inset 0px 35px 35px var(--cor-g0), inset 0px -35px 35px var(--cor-g0);\n      font-family: "Rubik";\n      font-style: normal;\n      font-weight: 500;\n      font-size: 2.5rem;\n      color: var(--cor-p1);\n      z-index: 2;\n      text-align: center;',document.querySelector(".search-page").appendChild(e)}}()})();