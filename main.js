(()=>{const e=document.querySelector('[data-menu="menu"]'),t=document.querySelector(".menu-links");e.addEventListener("click",(function(e){t.classList.toggle("ativo")})),document.addEventListener("click",(function(n){t.contains(n.target)||n.target===e||t.classList.remove("ativo")}));const n=document.querySelector(".search-icon"),a=document.querySelector("#search-mobile"),o=document.querySelector(".font-1-logo");n.addEventListener("click",(e=>{n.classList.add("active"),a.classList.add("active"),a.focus(),window.innerWidth<=767&&(o.style.display="none")})),a.addEventListener("focusout",(()=>{n.classList.remove("active"),a.classList.remove("active"),o.style.display="block"})),function(){const e=document.querySelector("#search"),t=document.querySelector("#search-mobile"),n=document.querySelector("#search-btn");function a(t){console.log(t),"keyup"===t.type&&(0!==e.value.length?n.classList.add("ativo"):n.classList.remove("ativo")),(13===t.keyCode||"click"===t.type&&0!==e.value.length)&&(window.location.href=window.location.origin+"/search.html?q="+e.value+"&page=1"),13===t.keyCode||"click"===t.type&&0===e.value.length?(e.classList.add("invalido"),console.log(e.classList)):e.classList.remove("invalido")}e.addEventListener("keyup",a),t.addEventListener("keyup",(function(e){13===e.keyCode&&0!==t.value.length&&(window.location.href=window.location.origin+"/search.html?q="+t.value+"&page=1"),13===e.keyCode&&0===t.value.length&&t.classList.add("invalido")})),n.addEventListener("click",a)}(),"/"===window.location.pathname&&async function(){const e=document.querySelector("div.grid-latest"),t=document.querySelector("div.grid-recent"),n=await fetch("https://gogoanime.consumet.org/recent-release?page=1"),a=await n.json(),o=await fetch("https://gogoanime.consumet.org/popular"),i=await o.json();a.map(((t,n)=>{if(n<10){const n=document.createElement("a");n.setAttribute("href","./anime.html?anime="+t.animeTitle),n.classList.add("anime-item"),n.innerHTML=`\n      <div class="cover">\n      <span class="episode font-2-mr">Episódio ${t.episodeNum}</span>\n      <img src="${t.animeImg}" alt="${t.animeTitle}" />\n      </div>\n      <span class="anime-title font-1-m">${t.animeTitle}</span>\n      `,e.append(n),document.querySelector(".lds-ellipsis")&&document.querySelector(".lds-ellipsis").remove()}})),i.map(((e,n)=>{if(n<6){const n=document.createElement("a");n.setAttribute("href","./anime.html?anime="+e.animeTitle),n.classList.add("anime-item"),n.innerHTML=`\n      <div class="cover">\n      \n      <img src="${e.animeImg}" alt="${e.animeTitle}" />\n      </div>\n      <span class="anime-title font-1-m">${e.animeTitle}</span>\n      `,t.append(n),document.querySelector(".lds-ellipsis")&&document.querySelector(".lds-ellipsis").remove()}})),t.style.cssText="display:grid",e.style.cssText="display:grid"}(),window.location.pathname.includes("anime.html")&&async function(){const e=await async function(){const e=window.location.search,t=new URLSearchParams(e).get("anime");try{const e=`https://gogoanime.consumet.org/search?keyw=${t}`,n=await fetch(e),a=`https://gogoanime.consumet.org/anime-details/${(await n.json())[0].animeId}`,o=await fetch(a);return await o.json()}catch(e){window.location.href=window.location.origin+"/404.html"}}(),t=await async function(){const e=window.location.search,t=`https://kitsu.io/api/edge/anime?filter[text]=${new URLSearchParams(e).get("anime")}`,n=await fetch(t);return await n.json()}(),n=document.querySelector("#anime-single .video h1"),a=document.querySelector(".sinopse-content li.episodes"),o=document.querySelector(".sinopse-content li.status"),i=document.querySelector(".sinopse-content li.genero"),s=document.querySelector(".sinopse-img"),c=document.querySelector(".sinopse-paragraph-content"),r=document.querySelector(".video-embed"),l="Completed"===e.status?"Completo":"Lançando";n.classList.remove("skeleton"),n.innerText=`${e.animeTitle} (${e.releasedDate})`,a.innerHTML=`<span class="info">Duração: </span><span class="info-content">${e.episodesList.length} Episódios.</span>`,o.innerHTML=`<span class="info">Status: </span><span class="info-content">${l}.</span>`,i.innerHTML=`<span class="info">Gêneros: </span><span class="info-content">${e.genres.slice(0,3).join(", ")}.</span>`,c.classList.remove("skeleton"),c.innerText=`${e.synopsis}`;const m=document.createElement("img");m.src=e.animeImg,m.alt=e.animeTitle,s.classList.remove("skeleton"),s.append(m);const d=`<iframe src="https://www.youtube.com/embed/${t.data[0].attributes.youtubeVideoId}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;r.outerHTML=d}(),window.location.pathname.includes("search.html")&&async function(){const e=new URLSearchParams(window.location.search),t=e.get("page"),n=`https://gogoanime.consumet.org/search?keyw=${e.get("q")}&page=${t}`;document.querySelector(".font-1-xl.search-query").innerText=e.get("q");let a=await fetch(n),o=await a.json();if(document.querySelector(".search-results").replaceChildren(),console.log(o),0!==o.length){for(result of o){const e=document.createElement("li");e.setAttribute("class","result-item"),e.innerHTML=`\n      <a href="${window.location.origin}/anime.html?anime=${result.animeId}">\n      <div class="sinopse-img skeleton"></div>\n      <div class="result-container">\n      <h3 class="skeleton font-1-m">${result.animeTitle}</h3>\n    <p class="skeleton font-1-m">${result.status}</p>\n    </div>\n    </a>\n    `;const t=document.createElement("img");t.src=result.animeImg,t.alt=result.animeTitle,e.querySelector(".sinopse-img").classList.remove("skeleton"),e.querySelector(".sinopse-img").append(t),document.querySelector(".search-results").append(e)}if(20===o.length&&1==e.get("page")){const t=document.createElement("ul");t.setAttribute("class","pagination-wrapper"),t.innerHTML=`\n      <li><a href="${window.location.origin}/search.html?q=${e.get("q")}&page=${Number(e.get("page"))+1}">Próxima</a>\n      `,document.querySelector(".search-page .container").append(t)}else if(20===o.length&&e.get("page")>=2){const t=document.createElement("ul");t.setAttribute("class","pagination-wrapper"),t.innerHTML=`\n      <li><a href="${window.location.origin}/search.html?q=${e.get("q")}&page=${Number(e.get("page"))-1}">Anterior</a>\n      <li><a href="${window.location.origin}/search.html?q=${e.get("q")}&page=${Number(e.get("page"))+1}">Próxima</a>\n      `,document.querySelector(".search-page .container").append(t)}else if(o.length<20&&e.get("page")>=2){const t=document.createElement("ul");t.setAttribute("class","pagination-wrapper"),t.innerHTML=`\n      <li><a href="${window.location.origin}/search.html?q=${e.get("q")}&page=${Number(e.get("page"))-1}">Anterior</a>\n      `,document.querySelector(".search-page .container").append(t)}}else{const e=document.createElement("div");e.setAttribute("class","error-not-found"),e.innerHTML="\n    <div class='container'>\n    <h3>Anime não encontrado, tente buscar por outro termo.</h3>\n    </div>",e.style.cssText='\n      height: calc(100vh - 454px);\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      background: no-repeat url(../img/killua.jpg) rgba(6, 9, 15, .9);\n      background-position: center center;\n      background-blend-mode: overlay;\n      background-size: cover;\n      position: relative;\n      box-shadow: inset 0px 35px 35px var(--cor-g0), inset 0px -35px 35px var(--cor-g0);\n      font-family: "Rubik";\n      font-style: normal;\n      font-weight: 500;\n      font-size: 2.5rem;\n      color: var(--cor-p1);\n      z-index: 2;\n      text-align: center;',document.querySelector(".search-page").appendChild(e)}}()})();